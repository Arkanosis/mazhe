\documentclass[a4paper]{book} 
%\documentclass[a4paper,draft]{book} 

% The following packages do not work with Arxiv.
% hypernat
% cases
% pst-eucl
% undertilde

\usepackage{pstricks,pst-node,pst-plot}
\usepackage{pst-abspos}
\usepackage{pst-eucl}
\usepackage{subfigure}
\usepackage{eso-pic}
\usepackage{pst-math}
\usepackage{pstricks-add}

\usepackage{calc}

\usepackage{ifthen}
\usepackage{xstring}
\usepackage{multicol}


\usepackage{graphicx}

\usepackage{latexsym}
\usepackage{amsfonts}
\usepackage[reqno]{amsmath}%  [1]
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{amsopn}         % for \mod

\usepackage{cases}
\usepackage{bbm}            % Symbols for the number sets N,Z,Q,H,R,C
\usepackage{mathrsfs}           % Used for Hilbert spaces, \hH etc.


\usepackage[normalem]{ulem}		% Pour le barré, commande \sout

\usepackage[all]{xy}            % http://zoonek2.free.fr/UNIX/11_xypic/

\usepackage[thinqspace,amssymb]{SIunits} 
\let\Oldcdot\cdot
\let\cdot\undefined
\let\Olddegree\degree
\let\degree\undefined
\let\Oldsecond\second
\let\second\undefined
\let\Oldfourth\fourth
\let\fourth\undefined
\usepackage{mathabx}    % for \ldbracket the double-bracket which gives the set of formal power series
\let\degree\Olddegree

\usepackage{makeidx}
\usepackage[nottoc]{tocbibind}      % Le paquetage qui fait en sorte que la biblio soit inclue correctement dans la table des matières.
\usepackage[refpage]{nomencl}
\renewcommand{\nomname}{List of symbols}
%
%   Comment introduire des éléments dans l'index des notations.
%
% La liste des tags à mettre pour bien classer mes notations est :
% A     pour l'algèbre (modules et tout ça)
% C     pour les C*algèbres et algèbres de Banach et de von Neumann (càd algèbres avec de l'analyse)
% D     pour la géométrie différentielle
% F     pour l'analyse fonctionnelle
% G     pour les groupes et algèbres de Lie
% O     pour les autres
%
% La syntaxe est facile, par exemple $\SL(2,\eR)$\nomenclature[G]{$\SL(2,\eR)$}{Le groupe de matrices deux par deux de déterminant 1.}
\renewcommand{\nomgroup}[1]{%
    \ifthenelse{\equal{#1}{A}}{\item[\textbf{Algebra}]}{}%
    \ifthenelse{\equal{#1}{C}}{\item[\textbf{Banach, von~Neumann and $C^*$-algebras}]}{}%
    \ifthenelse{\equal{#1}{D}}{\item[\textbf{Differential geometry}]}{}%
    \ifthenelse{\equal{#1}{F}}{\item[\textbf{Functional analysis}]}{}%
    \ifthenelse{\equal{#1}{G}}{\item[\textbf{Lie groups and algebras}]}{}%
    \ifthenelse{\equal{#1}{O}}{\item[\textbf{Others}]}{}%
    \ifthenelse{\equal{#1}{Q}}{\item[\textbf{Quantum groups}]}{}%
}

%marvosym est pour le petit sourire; il est incompatible avec AMS pour des double flèches d'implication. La solution est
\let\OldRightarrow\Rightarrow
% Cette série de \let\...\undefined, c'est pour résoudre un problème entre mathabx et marvosym
\let\Sun\undefined
\let\Moon\undefined
\let\Mercury\undefined
\let\Venus\undefined
\let\Mars\undefined
\let\Jupiter\undefined
\let\Saturn\undefined
\let\Uranus\undefined
\let\Neptune\undefined
\let\Pluto\undefined
\let\Earth\undefined
\let\Aries\undefined
\let\Taurus\undefined
\let\Gemini\undefined
\let\Leo\undefined
\let\Libra\undefined
\let\Scorpio\undefined
\usepackage{marvosym} 
\def\Rightarrow{\OldRightarrow}

\usepackage{esint}
\usepackage{verbatim}
\usepackage{nth}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%   Les lignes magiques pour le texte en anglais.
%
%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{ucs}           % Enlevé sous conseil du forum
%\usepackage[utf8x]{inputenc}       % Remplacé par utf8 simple sous conseil du forum
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{textcomp}
%\usepackage{mathpazo}
\usepackage{lmodern}
\usepackage[a4paper,margin=2cm]{geometry}   



\usepackage[linkcolor=blue,urlcolor=cyan]{hyperref}                  %Doit êre appelé en dernier.
%\usepackage[linkcolor=blue,urlcolor=cyan]{hyperref}                  %Doit êre appelé en dernier.
\hypersetup{colorlinks=true,linkcolor=blue}         %Pour enlever toutes les couleurs, ajouter draft=true
\usepackage[numbers,sort&compress]{natbib}
\usepackage{hypernat}

%-------Numéotations en tout genre...

%       Ceci était pour faire écrire le numéro de la page dans le référencement d'équations.
%\let\Oldeqref\eqref
%\renewcommand{\eqref}[1]{\Oldeqref{#1}-\pageref{#1}}

\setcounter{tocdepth}{4}        % Profondeur de la table des matièes
\setcounter{secnumdepth}{4}     % Profondeur dans le texte

% La numérotation des équations doit se faire dans le fichier principal pcq elle change avec les appendices.

\newcounter{numtho}[chapter]
\renewcommand{\thenumtho}{\arabic{chapter}.\arabic{numtho}}

% Ceci est un exemple du LaTeX Companion qui m'a servi pour créer mon style.
%\newtheoremstyle{ducompa}%
%       {9pt}{9pt}%
%       {\itshape}%
%       {-12pt}%
%       {\sffamily\bfseries}{:}%
%       {\newline}%
%       {}%

\newtheoremstyle{mes_tho}%
        {9pt}{9pt}%
        {\itshape}%
        {}%
        {\bfseries}{.}%
        {\newline}%
        {}%


\renewcommand*{\labelenumi}{\theenumi}
\renewcommand*{\theenumi}{(\roman{enumi})}


\theoremstyle{remark}
            \newtheorem{erreur}[numtho]{Error}

% Le style mes_tho est titre en gras sur une ligne et le texte en italique.
\theoremstyle{mes_tho}  \newtheorem{lemma}[numtho]{Lemma}
            \newtheorem{theorem}[numtho]{Theorem}
            \newtheorem{remark}[numtho]{Remark}
            \newtheorem{corollary}[numtho]{Corollary}
            \newtheorem{proposition}[numtho]{Proposition}
            \newtheorem{definition}[numtho]{Definition}


            \newenvironment{example}{\par\vspace{9pt}\noindent\refstepcounter{numtho}{\bf Example \thenumtho.}\newline\noindent}{\hfill$\diamondsuit$\par\vspace{9pt}}
            %\newtheorem{example}[numtho]{Example}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%% Deux environements qui servent à faire des remarques dans le texte.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcounter{numprob}
\newtheorem{probleme}[numprob]{\fbox{\bf Problem and misunderstanding}}
%\let\probleme\comment
% Cette deuxième ligne utilise le paquetage verbatim et sert à transformer d'un coup tous les problèmes en choses invisibles.

\newcommand{\quext}[1]{\footnote{\textsf{#1}}}
%\newcommand{\quext}[1]{}
%\newcommand{\quexto}[1]{}

%\newcounter{bparite}
%\setcounter{bparite}{0}
%\newcommand{\lolorem}[1]{%     Nom, Description, image
%   \stepcounter{bparite}
    %\fbox{(\arabic{bparite})}
    %\ifnum\thebparite=2 
    %   {%
    %   \setcounter{bparite}{0}
    %   \reversemarginpar
    %   \leavevmode\marginpar{(2) #1}
    %   }
    %\else 
    %   {%
    %   \normalmarginpar
    %   \leavevmode\marginpar{(1) #1}\par
    %   }\fi
 %}
%\reversemarginpar


\newenvironment{note}{\bgroup\LARGE}{\egroup}

% Le premier argument est optionel, c'est pour ajouter un [math.QA] par exemple pour la nouvelle numérotation de arXiv. Comme tu le vois, la valeur par défaut est vide.
\newcommand{\arxiv}[2][]{%
\newline
\ifthenelse{\equal{#1}{}}{%                     Tester si un argument optionnel est passé ou non.
    \href{http://arxiv.org/abs/#2}{{\tt arXiv:#2}}%     Si tu ne mets pas ce %, il y a un problème d'espace.
            }
            {%
    \href{http://arxiv.org/abs/#2}{{\tt arXiv:#2}[#1]}%     Si tu ne mets pas ce %, il y a un problème d'espace.
}%                                  Ce %-ci aussi est indispensable pour un espace à éviter avant le . ajouté par bibtex.
}               % Fin de la commande \arxiv

% -- L'environement suivant est taxé de la classe article.cls, sauf que j'ai enlevé la possibilité que ce soit sur une page de titre.
\newcommand\abstractname{Abstract}
\makeatletter
  \newenvironment{abstract}{%
      \if@twocolumn
        \section*{\abstractname}%
      \else
        \small
        \begin{center}%
          {\bfseries \abstractname\vspace{-.5em}\vspace{\z@}}%
        \end{center}%
        \quotation
      \fi}
      {\if@twocolumn\else\endquotation\fi}
\makeatother

\newcounter{bidon}
\newcounter{fin_tho}
%\Numérotation des théorèmes, remarques --------

%----------Constructions courantes
\newcommand{\defe}[2]{\textbf{#1}\index{#2}}


% The following uses xstring in order to replace specific characters by %xx codes.
% See the table http://www.utf8-chartable.de/
\newcommand{\MakeUTFPerCent}[1]{% 
   \StrSubstitute{#1}({\%28}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}){\%29}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}{à}{\%C3\%A0}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}{â}{\%C3\%A2}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}{ç}{\%C3\%A7}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}{è}{\%C3\%A8}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}{é}{\%C3\%A9}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}{ê}{\%C3\%AA}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}{ù}{\%C3\%B9}[\result]% 
   \expandafter\StrSubstitute\expandafter{\result}{û}{\%C3\%BB}[\result]% 
   %\expandafter\StrSubstitute\expandafter{\result}_{\_}[\result]% 
} 
%------------------------
% Links to wikipedia.
%------------------------
% Typical use is
% \wikipedia{fr}{Norme_(mathématiques)}{Norme}
% It creates the link \href to the right page on wikipedia, replacing  (,) and é by their respective %xx codes.
\newcommand{\wikipedia}[3]{% 
   \saveexpandmode\noexpandarg 
   \MakeUTFPerCent{#2}% 
   \restoreexpandmode 
   \href{http://#1.wikipedia.org/wiki/\result}{#3}% 
} 

% See https://gitorious.org/exocorr


\newcommand{\us}[1]{\frac{1}{#1}}
\newcommand{\dsd}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\me}[1]{(-1)^{#1}}
\newcommand{\xdp}[2]{#1\to #2}
\newcommand{\brak}[2]{\langle #1,#2\rangle}
\newcommand{\dsdd}[3]{\left.\frac{d}{d#2}#1\right|_{#2=#3}}
\newcommand{\Dsddb}[4]{\frac{d}{d#2}\Big[#1\Big]_{#3=#4}}
\newcommand{\Dsdd}[3]{ \Dsddb{#1}{#2}{#2}{#3}   }
\newcommand{\Dsddc}[3]{\frac{d}{d#2}\Big(#1\Big)_{#2=#3}}
\newcommand{\Dsddp}[3]{\frac{d}{d#2}\Big(#1\Big)_{#2=#3}}
%\newcommand{DDsdd}[5]{\frac{ d }{ d#2 }\frac{ d }{ d#3 }\left[  #1  \right]_{\substack{#2=#4\\#3=#5}}}

% Pour faire une double dérivation, il faut utiliser
% \DDsdd{ <expression> }{t}{0}{s}{0}





%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Quelque intégrales particulières
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%--------------Constructions expérimentales

%\Constructions expérimentales--------------

%Constructions peu courantes-----------




%\newcommand{\dixref}[1]{[Dixmier {\bf (#1)}] \addcontentsline{toc}{subsubsection}{Dixmier #1} }
%\newcommand{\lref}[1]{[Landsman \underline{#1}] \addcontentsline{toc}{subsubsection}{Landsman #1} }

\newcommand{\leref}[1]{[Landsman {(#1)}]}
\newcommand{\lsref}[1]{[Landsman {\bf #1}]}

%\newcommand{\suminf}[1]{\sum_{#1=0}^{\infty}}

%\newcommand{\mue}[1]{(-1)^{#1}}
%\newcommand{\muep}{(-1)^p}
%\Constructions peu courantes-----------


% -------- Les choses qui viennent de phyze


% Pour pstProjection
% 1 et 2 définissent une droite
% 3 est un point
% 4 est la projection orthogonale de ce point sur le droite
\newcommand{\pstProjectionOrth}[4]{%
\psset{PointSymbol=none, PointName=none}
\pstRotation[RotAngle=90]{#1}{#2}[PrInter]
\pstTranslation{#1}{PrInter}{#3}[PrInter2]
\pstInterLL{#1}{#2}{#3}{PrInter2}{#4}
}

% La macro \pstMarquePoint prend les arguments suivants :
% - 1 est optionnel : il donne le style de point qui va arriver
% - 2 est le point (au sens pstrick) qui doit être marqué
% - 3 est la position où va se trouver la marque par rapport au point pstrick. Typiquement c'est (0.3;90) en coordonnées polaires
% - 4 est ce qu'on va y noter
\newcommand{\pstMarquePoint}[4][PointSymbol=none]{%
\rput(#2){\rput(#3){#4}}                % Mettre le symbole du point là où il doit être
\pstGeonode[#1](#2){mpinter}                % Cette ligne fait apparaître un point à l'endroit que l'on marque.
                        %   étant donné le \psset{PointSymbol=none} dans lequel toutes les figures se trouvent,
                        %   ceci ne fait pas grand chose si on ne donne pas à \pstMarquePoint l'argument optionnel
                        %   du type PointSymbol=* par exemple.
}

%\Constructions d'un besoin passager-----------

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%% Délaration des opéateurs
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Les groupes et algèbres usuels

\newcommand{\slim}{\mathrm{s\lim}}
\newcommand{\uwlim}{\mathrm{uw\lim}}

\DeclareMathOperator{\rDi}{Di}
\DeclareMathOperator{\rRac}{Rac}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\GL}{GL}
\newcommand{\sod}{\mathfrak{so}(2)}
\newcommand{\SOdn}{\SO(2,n)}
\newcommand{\sodn}{  {\mathfrak{so}}(2,n)   }
\newcommand{\soun}{\mathfrak{so}(1,n)}
\newcommand{\SLdc}{\SL(2,\eC)}
\newcommand{\sldr}{\mathfrak{sl}(2,\eR)}
\newcommand{\SOun}{\SO(1,n)}
\newcommand{\gud}{\Gamma_{(2)}}
\newcommand{\Sput}{\Spin(1,3)}
\newcommand{\Sppq}{\Spin(p,q)}
\newcommand{\sppq}{\mathfrak{spin}(p,q)}
\newcommand{\Sopq}{\SO(p,q)}
\newcommand{\sopq}{\mathfrak{so}(p,q)}
\newcommand{\gl}{\mathfrak{gl}}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\SO}{SO}           
\DeclareMathOperator{\SP}{SP}           
\DeclareMathOperator{\gU}{U}            
\DeclareMathOperator{\gO}{O}            % On mets un g devant les groupes dont le nom est juste une lettre, ou est ambigu.
\DeclareMathOperator{\Conf}{Conf}   
\DeclareMathOperator{\diag}{diag}   
\DeclareMathOperator{\gsl}{\mathfrak{sl}}
\DeclareMathOperator{\go}{\mathfrak{o}}
\DeclareMathOperator{\gsu}{\mathfrak{su}}
\DeclareMathOperator{\gsp}{\mathfrak{sp}}   
\DeclareMathOperator{\so}{\mathfrak{so}}    
\DeclareMathOperator{\Spin}{Spin}
\DeclareMathOperator{\mSpin}{Spin}      % La commande \mSpin dénote l'application Spin qui va de SL(2,C) vers L^+ flèche.
\DeclareMathOperator{\spin}{\mathfrak{spin}}
\DeclareMathOperator{\Cl}{Cl}
\DeclareMathOperator{\Cliff}{Cl}
%\DeclareMathOperator{\CCliff}{\eC l}
\DeclareMathOperator{\CCliff}{\Cliff^{\eC}}     % Changement de notation par rapport à avant.
% Les autres

\DeclareMathOperator{\volume}{vol}
\DeclareMathOperator{\esssup}{ess-\sup}
\DeclareMathOperator{\gpAff}{Aff}
\DeclareMathOperator{\Vect}{Vect}
\DeclareMathOperator{\gpSymp}{Symp}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\horsp}{hor}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\Dim}{Dim}
\DeclareMathOperator{\Reel}{Re}     
\DeclareMathOperator{\Imag}{Im}         % Ne pas confondre \Imag qui donne la partie imaginaire  ...
\DeclareMathOperator{\Image}{Im}        % ... avec \Image qui donne l'image d'une fonction ou d'un opérateur.
\DeclareMathOperator{\Kernel}{Ker}
\DeclareMathOperator{\Domain}{Dom}      % Domaine of an operator
\DeclareMathOperator{\Harm}{Harm}       % The space of harmonic forms
\DeclareMathOperator{\Sign}{Sign}       % The sign function.
\DeclareMathOperator{\Rank}{Rank}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\ResW}{\Res_W}
\DeclareMathOperator{\pr}{\texttt{pr}}
\DeclareMathOperator{\tr}{Tr}
\DeclareMathOperator{\Fun}{\texttt{Fun}}
\DeclareMathOperator{\sgrad}{sgrad}
\DeclareMathOperator{\Stab}{\texttt{Stab}}
\DeclareMathOperator{\stab}{\mathfrak{Stab}}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Ad}{Ad}
\DeclareMathOperator{\AD}{\textbf{Ad}}
\DeclareMathOperator{\Der}{\texttt{Der}}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Inn}{Inn}
\DeclareMathOperator{\Out}{Out}
\DeclareMathOperator{\Diff}{Diff}
\DeclareMathOperator{\biDiff}{bi-Diff}
\DeclareMathOperator{\Span}{Span}
\DeclareMathOperator{\Hol}{Hol}
\DeclareMathOperator{\Iso}{\texttt{Iso}}
\DeclareMathOperator{\Ray}{Ray}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\Adh}{Adh}
\DeclareMathOperator{\mfsp}{\mathfrak{sp}}
\DeclareMathOperator{\Fr}{Fr}
\DeclareMathOperator{\Rad}{Rad}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\niv}{Level}
\DeclareMathOperator{\Supp}{Supp}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\arcsinh}{arcsh}
\DeclareMathOperator{\Pol}{Pol}
\DeclareMathOperator{\Prim}{Prim}
\DeclareMathOperator{\Trans}{Trans}
\DeclareMathOperator{\Verm}{Verm}       % Pour le module de Verma
\DeclareMathOperator{\Irr}{Irr}
\DeclareMathOperator{\vol}{Vol}
\DeclareMathOperator{\Ob}{Ob}           % The ``set'' of object of a category
\DeclareMathOperator{\Op}{Op}           % Le truc de la quantification de Weyl

%\Déclaration des opérateurs---------------

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% Extension de l'alphabet grec
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\Alphabets math-----------------

%------------Les ensembles

\newcommand{\eA}{\mathbbm{A}}
\newcommand{\eB}{\mathbbm{B}}
\newcommand{\eC}{\mathbbm{C}}
\newcommand{\eE}{\mathbbm{E}}
\newcommand{\eH}{\mathbbm{H}}
\newcommand{\eK}{\mathbbm{K}}           % Number sets. It uses the package bbm
\newcommand{\eM}{\mathbbm{M}}
\newcommand{\eN}{\mathbbm{N}}
\newcommand{\eP}{\mathbbm{P}}
\newcommand{\eQ}{\mathbbm{Q}}
\newcommand{\eR}{\mathbbm{R}}
\newcommand{\eT}{\mathbbm{T}}
\newcommand{\eZ}{\mathbbm{Z}}

\newcommand{\LoL}{\mathscr{L}}      % Lorentz group
\newcommand{\LoP}{\mathscr{P}}      % Poincaré group

\newcommand{\catC}{\mathscr{C}}     % \catX is for the categories
\newcommand{\catD}{\mathscr{D}}     
\newcommand{\catM}{\mathscr{M}}     


\newcommand{\mtu}{\mathbbm{1}}              % Unit matrix

%\Les ensembles-----------

% Des commandes définies dans extradef.tex qui est une dépendance du manuel d'utilisation de AmSLaTeX.
% elles peuvent être trouvées à http://www.uic.edu/depts/accc/software/tex/miscfiles/
\def\LaTeX{\protect\pLaTeX}
\def\pLaTeX{{\rm L\kern-.36em\raise.3ex\hbox{\the\scriptfont0 A}\kern-.15em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\def\amslatex/{\AmS-\LaTeX{}}

% Pour le d de sigurdur dans le bibtex
\def\dbar{\leavevmode\hbox to 0pt{\hskip.2ex
  \accent"16\hss}d}

% The macro \mapdp is no more used
%\newcommand{\mapdp}[5]{%
%                       \begin{equation}\begin{aligned}
%                           #1\,:\,#2&\to #3\\
%                                  #4&\mapsto #5
%                        \end{aligned}\end{equation}
%                        }


% The macro \mapdpe is no more used
%\newcommand{\mapdpe}[5]{%
%                       \begin{equation}\begin{aligned}
%                           #1\,:\,#2&\to #3\\
%                                  #4&= #5
%                        \end{aligned}\end{equation}
%                        }

